//#!py
/**
 * @require gd-bmp:bmpModule
 * @
 */
function createVerifyCodeImage(op)
	op = Object.assign({
		margin: [10, 4],
		width: 64,
		height: 24,
		bg: 0xffffff,
		fg: 0x999999,
		sep: 6,
		count: 4,
	}, op)
	
	const fontConf = {
		w: 12,
		h: 24,
		fonts: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
		data: [[0,0,0,0,0,0,0,0,15,48,0,0,31,32,64,64,65,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,64,64,192,64,64,64,192,112,0,0,0,0,0,0],[0,0,0,0,224,32,32,32,39,40,48,32,32,32,32,48,40,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,64,32,16,16,16,16,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,24,16,32,32,32,32,16,16,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,96,32,0,0,0,0,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,15,48,32,64,64,64,64,32,48,15,0,0,0,0,0,0,0,0,0,0,224,32,32,32,32,160,96,32,32,32,32,96,160,48,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,15,16,32,32,63,32,32,16,24,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,64,32,32,224,0,0,0,32,192,0,0,0,0,0,0],[0,0,0,0,3,4,4,4,63,4,4,4,4,4,4,4,4,31,0,0,0,0,0,0,0,0,0,0,240,0,0,0,224,0,0,0,0,0,0,0,0,192,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,8,16,32,32,32,32,16,16,15,0,0,0,15,0,0,0,0,0,0,0,0,0,0,48,160,96,32,32,32,32,96,160,32,32,32,64,128,0,0],[0,0,0,0,112,16,16,16,19,28,16,16,16,16,16,16,16,124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,64,32,32,32,32,32,32,32,240,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,30,2,2,2,2,2,2,2,2,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,63,0,0,0,0,0,0,0,0,0,0,0,1,62,0,0,0,0,0,0,0,0,0,0,128,128,128,128,128,128,128,128,128,128,128,128,0,0,0,0],[0,0,0,0,56,8,8,8,8,8,8,9,10,14,9,8,8,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,64,128,0,0,0,0,128,64,240,0,0,0,0,0,0],[0,0,0,0,30,2,2,2,2,2,2,2,2,2,2,2,2,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,236,51,34,34,34,34,34,34,34,251,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,32,32,32,32,32,32,32,32,176,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,115,28,16,16,16,16,16,16,16,124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,64,32,32,32,32,32,32,32,240,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,24,16,32,32,32,32,16,24,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,64,96,32,32,32,32,96,192,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,231,40,48,32,32,32,32,48,40,39,32,32,32,248,0,0,0,0,0,0,0,0,0,0,128,64,32,16,16,16,16,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,15,16,32,32,32,32,32,32,16,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,160,96,32,32,32,32,96,160,32,32,32,32,240,0,0],[0,0,0,0,0,0,0,0,57,10,12,8,8,8,8,8,8,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,32,0,0,0,0,0,0,0,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,31,32,32,32,31,0,0,32,48,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,96,32,0,128,64,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,8,8,8,63,8,8,8,8,8,8,8,8,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,0,0,0,0,0,0,0,96,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,112,16,16,16,16,16,16,16,16,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,32,32,32,32,32,32,32,96,176,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,240,32,32,16,16,9,9,9,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,64,64,128,128,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,240,32,34,34,38,21,21,21,21,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,32,32,32,64,64,64,64,64,128,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,120,16,8,5,6,5,9,8,16,120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,64,128,0,0,0,0,128,64,240,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,240,32,32,16,16,8,8,5,5,2,2,4,4,126,0,0,0,0,0,0,0,0,0,0,112,32,64,64,128,128,128,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,63,32,32,1,2,4,8,16,32,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,64,128,0,0,0,0,64,64,192,0,0,0,0,0,0],[0,0,0,0,0,63,5,8,8,8,16,16,16,63,32,32,64,240,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,128,64,64,64,224,32,32,16,112,0,0,0,0,0,0],[0,0,0,0,0,127,16,16,16,16,16,31,16,16,16,16,16,127,0,0,0,0,0,0,0,0,0,0,0,0,128,64,64,64,128,128,64,32,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,15,24,32,64,64,64,64,64,64,32,32,16,15,0,0,0,0,0,0,0,0,0,0,0,144,112,16,16,0,0,0,0,0,0,16,32,192,0,0,0,0,0,0],[0,0,0,0,0,127,16,16,16,16,16,16,16,16,16,16,16,127,0,0,0,0,0,0,0,0,0,0,0,128,64,32,16,16,16,16,16,16,16,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,127,16,16,16,17,17,31,17,17,16,16,16,127,0,0,0,0,0,0,0,0,0,0,0,224,32,32,0,0,0,0,0,0,32,32,32,224,0,0,0,0,0,0],[0,0,0,0,0,127,16,16,16,17,17,31,17,17,16,16,16,127,0,0,0,0,0,0,0,0,0,0,0,224,32,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,15,16,32,64,64,64,64,67,64,64,32,16,15,0,0,0,0,0,0,0,0,0,0,0,160,96,32,0,0,0,0,240,32,32,32,32,192,0,0,0,0,0,0],[0,0,0,0,0,248,32,32,32,32,32,63,32,32,32,32,32,248,0,0,0,0,0,0,0,0,0,0,0,240,32,32,32,32,32,224,32,32,32,32,32,240,0,0,0,0,0,0],[0,0,0,0,0,63,2,2,2,2,2,2,2,2,2,2,2,63,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0],[0,0,0,0,0,7,0,0,0,0,0,0,32,32,32,32,16,15,0,0,0,0,0,0,0,0,0,0,0,240,64,64,64,64,64,64,64,64,64,64,128,0,0,0,0,0,0,0],[0,0,0,0,0,124,16,16,16,17,22,27,16,16,16,16,16,124,0,0,0,0,0,0,0,0,0,0,0,112,32,64,128,0,0,0,128,64,64,64,32,48,0,0,0,0,0,0],[0,0,0,0,0,62,8,8,8,8,8,8,8,8,8,8,8,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,16,16,16,240,0,0,0,0,0,0],[0,0,0,0,0,240,48,40,40,36,37,37,34,34,32,32,32,248,0,0,0,0,0,0,0,0,0,0,0,112,96,160,160,160,32,32,32,32,32,32,32,240,0,0,0,0,0,0],[0,0,0,0,0,240,48,40,40,36,36,34,33,33,32,32,32,248,0,0,0,0,0,0,0,0,0,0,0,240,32,32,32,32,32,32,32,32,160,160,96,96,0,0,0,0,0,0],[0,0,0,0,0,15,16,32,32,64,64,64,64,64,32,32,16,15,0,0,0,0,0,0,0,0,0,0,0,128,64,32,32,16,16,16,16,16,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,63,8,8,8,8,8,8,15,8,8,8,8,63,0,0,0,0,0,0,0,0,0,0,0,192,32,16,16,16,16,32,192,0,0,0,0,128,0,0,0,0,0,0],[0,0,0,0,0,15,16,32,32,64,64,64,64,64,32,32,16,15,4,15,24,0,0,0,0,0,0,0,0,128,64,32,16,16,16,16,16,16,32,32,64,128,0,16,224,0,0,0],[0,0,0,0,0,127,16,16,16,16,16,31,16,16,16,16,16,124,0,0,0,0,0,0,0,0,0,0,0,0,128,64,64,64,128,0,128,128,64,64,32,48,0,0,0,0,0,0],[0,0,0,0,0,15,16,32,32,32,24,15,0,0,32,32,48,47,0,0,0,0,0,0,0,0,0,0,0,160,96,32,32,0,0,128,64,32,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,63,34,34,34,34,2,2,2,2,2,2,2,15,0,0,0,0,0,0,0,0,0,0,0,224,32,32,32,32,0,0,0,0,0,0,0,128,0,0,0,0,0,0],[0,0,0,0,0,248,32,32,32,32,32,32,32,32,32,32,16,15,0,0,0,0,0,0,0,0,0,0,0,240,32,32,32,32,32,32,32,32,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,0,224,64,64,32,32,16,16,16,9,9,9,6,6,0,0,0,0,0,0,0,0,0,0,0,112,32,32,64,64,128,128,128,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,240,64,64,66,66,37,37,37,40,40,40,40,16,0,0,0,0,0,0,0,0,0,0,0,48,16,16,16,16,32,32,32,160,160,160,160,64,0,0,0,0,0,0],[0,0,0,0,0,120,16,8,8,5,2,1,5,8,16,16,32,120,0,0,0,0,0,0,0,0,0,0,0,240,64,0,128,0,0,0,0,128,64,64,32,240,0,0,0,0,0,0],[0,0,0,0,0,120,32,16,8,8,5,2,2,2,2,2,2,15,0,0,0,0,0,0,0,0,0,0,0,240,32,64,128,128,0,0,0,0,0,0,0,128,0,0,0,0,0,0],[0,0,0,0,0,63,32,32,32,1,1,2,4,12,8,16,32,63,0,0,0,0,0,0,0,0,0,0,0,224,32,64,128,0,0,0,0,32,32,32,32,224,0,0,0,0,0,0],[0,0,0,0,7,8,16,32,32,32,32,32,32,32,32,16,8,7,0,0,0,0,0,0,0,0,0,0,128,192,64,32,32,32,32,32,32,32,32,64,128,0,0,0,0,0,0,0],[0,0,0,0,6,58,2,2,2,2,2,2,2,2,2,2,2,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0],[0,0,0,0,15,16,32,32,0,0,0,1,2,4,8,16,32,63,0,0,0,0,0,0,0,0,0,0,0,128,64,64,64,128,128,0,0,0,0,0,64,192,0,0,0,0,0,0],[0,0,0,0,15,48,0,0,0,0,7,0,0,0,0,0,32,31,0,0,0,0,0,0,0,0,0,0,128,64,32,32,32,64,128,64,32,32,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,1,2,2,4,4,8,16,16,32,63,0,0,0,3,0,0,0,0,0,0,0,0,0,0,128,128,128,128,128,128,128,128,128,192,128,128,128,192,0,0,0,0,0,0],[0,0,0,0,31,16,16,16,16,23,24,0,0,0,0,32,16,15,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,128,64,64,64,64,64,128,0,0,0,0,0,0,0],[0,0,0,0,1,6,12,8,16,16,19,20,24,16,16,8,12,3,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,128,64,32,32,32,32,64,128,0,0,0,0,0,0],[0,0,0,0,63,32,0,0,0,0,0,1,1,1,2,2,2,2,0,0,0,0,0,0,0,0,0,0,192,64,64,128,128,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,15,16,32,32,32,16,15,16,32,32,32,32,16,15,0,0,0,0,0,0,0,0,0,0,0,128,64,64,64,128,0,128,64,64,64,64,128,0,0,0,0,0,0,0],[0,0,0,0,7,8,16,16,16,16,16,8,7,0,0,0,0,31,0,0,0,0,0,0,0,0,0,0,0,192,64,32,32,32,96,96,160,32,64,64,128,0,0,0,0,0,0,0]],
	}
	
	let width = (fontConf.w + op.sep) * op.count - op.sep + op.margin[0] * 2
	let height = fontConf.h + op.margin[1] * 2
	fontConf.w += op.sep
	
	let bmp = new bmpModule.BMP24(width, height)
	let str = randomString(op.count, fontConf.fonts)
	
    bmp.fillRect(0, 0, width, height, op.bg)
	bmp.drawString(str, op.margin[0], op.margin[1], fontConf, op.fg)
	
	return [str, bmp.getFileData()]
	
	function randomString(count, fonts)
		let chrs = ''
		for let i = 0, l = fonts.length; i < count; i++
			let chr = fonts[(Math.random() * l) >> 0]
			if 'iOo0'.includes(chr)
				i--
				continue
			else
				chrs += chr
		return chrs